<!--
 Copyright (C) 2022 Helmar Hutschenreuter
 
 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Affero General Public License as
 published by the Free Software Foundation, either version 3 of the
 License, or (at your option) any later version.
 
 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU Affero General Public License for more details.
 
 You should have received a copy of the GNU Affero General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<mvtool-create-edit-dialog
  [createMode]="false"
  [objectName]="'Filter: ' + column.label"
  (save)="onSave($event)"
  (cancel)="onCancel()"
>
  <div class="fx-column">
    <!-- Search string -->
    <mat-form-field appearance="fill">
      <mat-label>Search</mat-label>
      <input name="search" [(ngModel)]="searchStr" matInput />
    </mat-form-field>

    <div>
      <ul *ngIf="filterSelection.filterStates.length">
        <li class="fx-row fx-gap-10">
          <!-- Select all checkbox -->
          <mat-checkbox
            name="selectAll"
            [checked]="filterSelection.allSelected"
            [indeterminate]="filterSelection.partlySelected"
            (change)="filterSelection.toggleSelectAll()"
          ></mat-checkbox>
          <div class="truncate">Select all search results</div>
        </li>
        <li
          *ngFor="let filterState of filterSelection.filterStates"
          [class.selected]="filterState.selected"
          class="fx-row fx-gap-10"
        >
          <mat-checkbox
            [checked]="filterState.selected"
            (change)="filterState.toggleSelected()"
          ></mat-checkbox>
          <div class="truncate">
            {{ filterState.text ? filterState.text : "(Empty)" }}
          </div>
        </li>
      </ul>
      <div *ngIf="!filterSelection.filterStates.length">
        No search results found.
      </div>
    </div>
  </div>
</mvtool-create-edit-dialog>

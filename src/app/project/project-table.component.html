<div fxLayout="column">
  <!-- Toolbar -->
  <mvtool-table-toolbar
    (refresh)="onReloadProjects()"
    (create)="onCreateProject()"
    [showFilter]="true"
    filterLabel="Filter Projects"
    createLabel="Create Project"
    #tableToolbar>
  </mvtool-table-toolbar>

  <!-- Projects table -->
  <mvtool-table
    [displayedColumns]="displayedColumns"
    [data]="data"
    [dataLoaded]="dataLoaded"
    [filterValue]="tableToolbar.filterValue"
    (create)="onCreateProject()"
    noContentText="No projects found."
    loadingText="Loading projects..."
    (rowClicked)="projectClicked.emit($event)"
    matSort #sort="matSort"
    [sort]="sort">
    
    <!-- ID Column -->
    <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
        <td mat-cell *matCellDef="let project"> {{project.id}} </td>
    </ng-container>
  
    <!-- Name column -->
    <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
        <td mat-cell *matCellDef="let project"> {{project.name}} </td>
    </ng-container>
  
    <!-- Description column -->
    <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Description </th>
        <td mat-cell *matCellDef="let project"> {{project.description | truncate}} </td>
    </ng-container>
  
    <!-- JIRA project column -->
    <ng-container matColumnDef="jira_project_id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> JIRA Project </th>
        <td mat-cell *matCellDef="let project">
          <mvtool-jira-project-label 
            [project]="project" (click)="$event.stopPropagation()">
          </mvtool-jira-project-label>
        </td>
    </ng-container>
  
    <ng-container matColumnDef="options">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let project">
          <mvtool-table-options
            (edit)="onEditProject(project)"
            (delete)="onDeleteProject(project)">
          </mvtool-table-options>
        </td>
    </ng-container>
  </mvtool-table>
</div>